(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[959],{3239:(e,r,t)=>{"use strict";t.d(r,{default:()=>c});var n=t(5155);t(2115);var o=t(6766),a=t(6874),s=t.n(a),i=t(8088);let c=e=>{let{id:r,title:t,handle:a,description:c,price:l,image:d}=e,{addToCart:u}=(0,i._)();return(0,n.jsxs)("div",{className:"group bg-white rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:[(0,n.jsx)(s(),{href:"/product/".concat(a),className:"block relative h-64 overflow-hidden",children:d.src?(0,n.jsx)(o.default,{src:d.src,alt:d.alt||t,fill:!0,sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",className:"object-cover group-hover:scale-105 transition-transform duration-300"}):(0,n.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-100 text-gray-400",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})}),(0,n.jsxs)("div",{className:"p-4",children:[(0,n.jsx)(s(),{href:"/product/".concat(a),className:"block",children:(0,n.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-1 hover:text-[#FF6700] transition-colors",children:t})}),(0,n.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2 mb-3",children:c}),(0,n.jsxs)("div",{className:"flex justify-between items-center",children:[(0,n.jsx)("span",{className:"text-[#FF6700] font-semibold",children:function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"BRL";return new Intl.NumberFormat("pt-BR",{style:"currency",currency:r}).format(parseFloat(e))}(l.amount,l.currencyCode)}),(0,n.jsx)("button",{onClick:()=>{u({id:r,title:t,price:parseFloat(l.amount),currencyCode:l.currencyCode,image:d.src,variantId:r,productId:r,quantity:1})},className:"bg-[#FF6700] text-white py-2 px-4 rounded-md hover:bg-[#E05A00] transition-colors text-sm font-medium",children:"Adicionar"})]})]})]})}},3533:(e,r,t)=>{"use strict";t.d(r,{No:()=>S,WY:()=>w,d$:()=>v,qw:()=>b,zh:()=>N});var n=t(5933),o=t(2527),a=t(2344),s=t(2641),i=t(6112),c=t(9509);function l(){let e=(0,n._)(["\n    mutation productCreate($input: ProductInput!) {\n      productCreate(input: $input) {\n        product {\n          id\n          title\n          handle\n          descriptionHtml\n          productType\n          vendor\n          tags\n          variants(first: 10) {\n            edges {\n              node {\n                id\n                title\n                price\n                compareAtPrice\n                sku\n                inventoryQuantity\n              }\n            }\n          }\n          images(first: 10) {\n            edges {\n              node {\n                id\n                src\n                altText\n              }\n            }\n          }\n        }\n        userErrors {\n          field\n          message\n        }\n      }\n    }\n  "]);return l=function(){return e},e}function d(){let e=(0,n._)(["\n    mutation collectionCreate($input: CollectionInput!) {\n      collectionCreate(input: $input) {\n        collection {\n          id\n          title\n          handle\n          descriptionHtml\n          image {\n            id\n            src\n            altText\n          }\n        }\n        userErrors {\n          field\n          message\n        }\n      }\n    }\n  "]);return d=function(){return e},e}console.log("Vari\xe1veis de ambiente carregadas:"),console.log("SHOPIFY_STORE_DOMAIN:","uxh1te-1d.myshopify.com"),console.log("SHOPIFY_STOREFRONT_TOKEN_CLIENT:","c468b35799acbc73e0a1ee98713bad6c"),console.log("SHOPIFY_ADMIN_API_TOKEN:",c.env.SHOPIFY_ADMIN_API_TOKEN);let u="uxh1te-1d.myshopify.com",p="c468b35799acbc73e0a1ee98713bad6c",m=c.env.SHOPIFY_ADMIN_API_TOKEN;if(!p)throw Error("A vari\xe1vel de ambiente SHOPIFY_STOREFRONT_TOKEN_CLIENT n\xe3o est\xe1 definida.");if(!m)throw Error("A vari\xe1vel de ambiente SHOPIFY_ADMIN_API_TOKEN n\xe3o est\xe1 definida.");console.log("Valores usados para a integra\xe7\xe3o:"),console.log("SHOPIFY_STORE_DOMAIN:",u),console.log("SHOPIFY_STOREFRONT_TOKEN_CLIENT:",p);let h=()=>({mockProducts:Array(10).fill(null).map((e,r)=>({id:"gid://shopify/Product/".concat(r+1),title:"Xiaomi Smartphone ".concat(r+1),handle:"xiaomi-smartphone-".concat(r+1),description:"Este \xe9 um smartphone Xiaomi de alta qualidade com excelentes recursos e desempenho.",priceRange:{minVariantPrice:{amount:"".concat(999+100*r),currencyCode:"BRL"}},images:{edges:[{node:{originalSrc:"https://placehold.co/600x400?text=Xiaomi+Smartphone",altText:"Xiaomi Smartphone ".concat(r+1)}}]}})),mockCollections:[{id:"gid://shopify/Collection/1",title:"Smartphones",handle:"smartphones",description:"Nossa cole\xe7\xe3o de smartphones Xiaomi",image:{originalSrc:"https://placehold.co/600x400?text=Smartphones",altText:"Smartphones"}},{id:"gid://shopify/Collection/2",title:"Acess\xf3rios",handle:"acessorios",description:"Acess\xf3rios para seus dispositivos Xiaomi",image:{originalSrc:"https://placehold.co/600x400?text=Acessorios",altText:"Acess\xf3rios"}},{id:"gid://shopify/Collection/3",title:"Casa Inteligente",handle:"casa-inteligente",description:"Produtos Xiaomi para sua casa inteligente",image:{originalSrc:"https://placehold.co/600x400?text=Casa+Inteligente",altText:"Casa Inteligente"}}]}),g=(0,o.$)({uri:"https://".concat(u,"/api/2023-10/graphql.json"),headers:{"X-Shopify-Storefront-Access-Token":p,"Content-Type":"application/json"}}),x=(0,o.$)({uri:"https://".concat(u,"/admin/api/2023-10/graphql.json"),headers:{"X-Shopify-Access-Token":m,"Content-Type":"application/json"}}),f=new a.R({link:g,cache:new s.D,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),y=new a.R({link:x,cache:new s.D,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{errorPolicy:"all"}}});async function v(){try{console.log("Tentando buscar produtos da Shopify..."),console.log("URL da API:","https://".concat(u,"/api/2023-10/graphql.json")),console.log("Token usado:",p);let e=await f.query({query:(0,i.J1)("\n    query GetProducts {\n      products(first: 10) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            priceRange {\n              minVariantPrice {\n                amount\n                currencyCode\n              }\n            }\n            images(first: 1) {\n              edges {\n                node {\n                  originalSrc\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ")});return console.log("Resposta da API Shopify (produtos):",e),e.data.products.edges.map(e=>e.node)}catch(r){console.error("Erro ao buscar produtos:",r),console.warn("Usando dados mockados para produtos devido a erro na API");let{mockProducts:e}=h();return e}}async function b(){try{console.log("Tentando buscar cole\xe7\xf5es da Shopify..."),console.log("URL da API:","https://".concat(u,"/api/2023-10/graphql.json"));let e=await f.query({query:(0,i.J1)("\n    query GetCollections {\n      collections(first: 10) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            image {\n              originalSrc\n              altText\n            }\n          }\n        }\n      }\n    }\n  ")});return console.log("Resposta da API Shopify (cole\xe7\xf5es):",e),e.data.collections.edges.map(e=>e.node)}catch(r){console.error("Erro ao buscar cole\xe7\xf5es:",r),console.warn("Usando dados mockados para cole\xe7\xf5es devido a erro na API");let{mockCollections:e}=h();return e}}async function N(e){try{return(await f.query({query:(0,i.J1)("\n    query SearchProducts($query: String!) {\n      products(first: 20, query: $query) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            priceRange {\n              minVariantPrice {\n                amount\n                currencyCode\n              }\n            }\n            images(first: 1) {\n              edges {\n                node {\n                  originalSrc\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "),variables:{query:e}})).data.products.edges.map(e=>e.node)}catch(t){console.error("Erro ao buscar produtos:",t);let{mockProducts:r}=h();return r.filter(r=>r.title.toLowerCase().includes(e.toLowerCase())||r.description.toLowerCase().includes(e.toLowerCase()))}}async function w(e){var r,t;let n=(0,i.J1)(l()),o=(null===(r=e.images)||void 0===r?void 0:r.map(r=>({src:r.src,altText:r.altText||e.title})))||[],a=(null===(t=e.variants)||void 0===t?void 0:t.map(e=>({price:e.price,compareAtPrice:e.compareAtPrice,sku:e.sku,inventoryQuantity:e.inventoryQuantity||0,requiresShipping:void 0===e.requiresShipping||e.requiresShipping,taxable:void 0===e.taxable||e.taxable})))||[{price:"0.00"}],s={title:e.title,descriptionHtml:e.descriptionHtml||"",productType:e.productType||"",vendor:e.vendor||"Xiaomi",tags:e.tags||[],images:o,variants:a};try{let e=await y.mutate({mutation:n,variables:{input:s}});if(e.data.productCreate.userErrors.length>0)throw console.error("Erros ao criar produto:",e.data.productCreate.userErrors),Error(e.data.productCreate.userErrors[0].message);return e.data.productCreate.product}catch(e){throw console.error("Erro ao criar produto:",e),e}}async function S(e,r,t){let n=(0,i.J1)(d()),o={title:e,descriptionHtml:r};t&&(o.image={src:t,altText:e});try{let e=await y.mutate({mutation:n,variables:{input:o}});if(e.data.collectionCreate.userErrors.length>0)throw console.error("Erros ao criar cole\xe7\xe3o:",e.data.collectionCreate.userErrors),Error(e.data.collectionCreate.userErrors[0].message);return e.data.collectionCreate.collection}catch(e){throw console.error("Erro ao criar cole\xe7\xe3o:",e),e}}},5695:(e,r,t)=>{"use strict";var n=t(8999);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},6584:(e,r,t)=>{Promise.resolve().then(t.bind(t,8933))},8088:(e,r,t)=>{"use strict";t.d(r,{CartProvider:()=>i,_:()=>s});var n=t(5155),o=t(2115);let a=(0,o.createContext)(void 0);function s(){let e=(0,o.useContext)(a);if(void 0===e)throw Error("useCart deve ser usado dentro de um CartProvider");return e}function i(e){let{children:r}=e,[t,s]=(0,o.useState)([]),[i,c]=(0,o.useState)(!1);(0,o.useEffect)(()=>{let e=localStorage.getItem("cart");if(e)try{s(JSON.parse(e))}catch(e){console.error("Erro ao carregar carrinho do localStorage:",e)}},[]),(0,o.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(t))},[t]);let l=e=>{s(r=>r.filter(r=>r.id!==e))},d=t.reduce((e,r)=>e+r.quantity,0),u=t.reduce((e,r)=>e+r.price*r.quantity,0);return(0,n.jsx)(a.Provider,{value:{cart:t,addToCart:e=>{s(r=>{let t=r.findIndex(r=>r.variantId===e.variantId);if(!(t>=0))return[...r,{...e}];{let n=[...r];return n[t].quantity+=e.quantity,n}}),c(!0)},removeFromCart:l,updateQuantity:(e,r)=>{if(r<=0){l(e);return}s(t=>t.map(t=>t.id===e?{...t,quantity:r}:t))},clearCart:()=>{s([])},isCartOpen:i,toggleCart:()=>{c(e=>!e)},totalItems:d,totalPrice:u},children:r})}},8933:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>u});var n=t(5155),o=t(2115),a=t(5695),s=t(6874),i=t.n(s),c=t(3239),l=t(3533);function d(){let e=(0,a.useSearchParams)().get("q")||"",[r,t]=(0,o.useState)([]),[s,d]=(0,o.useState)(!0),[u,p]=(0,o.useState)(e);return(0,o.useEffect)(()=>{(async()=>{if(!e){t([]),d(!1);return}d(!0);try{let r=await (0,l.zh)(e);t(r)}catch(e){console.error("Erro ao buscar produtos:",e),t([])}finally{d(!1)}})()},[e]),(0,n.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,n.jsxs)("div",{className:"mb-8",children:[(0,n.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Busca"}),(0,n.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,n.jsx)(i(),{href:"/",className:"hover:text-[#FF6700]",children:"In\xedcio"}),(0,n.jsx)("span",{className:"mx-2",children:"/"}),(0,n.jsx)("span",{children:"Busca"})]})]}),(0,n.jsx)("div",{className:"mb-8",children:(0,n.jsxs)("form",{onSubmit:e=>{e.preventDefault();let r=new URL(window.location.href);r.searchParams.set("q",u),window.history.pushState({},"",r.toString()),window.location.href=r.toString()},className:"flex w-full max-w-3xl mx-auto",children:[(0,n.jsx)("input",{type:"text",value:u,onChange:e=>p(e.target.value),placeholder:"O que voc\xea est\xe1 procurando?",className:"flex-grow py-3 px-4 border border-gray-300 rounded-l-md focus:outline-none focus:ring-2 focus:ring-[#FF6700] focus:border-transparent"}),(0,n.jsx)("button",{type:"submit",className:"bg-[#FF6700] text-white py-3 px-6 rounded-r-md hover:bg-[#E05A00] transition-colors",children:"Buscar"})]})}),(0,n.jsx)("div",{children:s?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#FF6700]"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Buscando produtos..."})]}):(0,n.jsxs)(n.Fragment,{children:[e?(0,n.jsx)("h2",{className:"text-xl font-semibold mb-6",children:r.length>0?"".concat(r.length,' resultados para "').concat(e,'"'):'Nenhum resultado encontrado para "'.concat(e,'"')}):(0,n.jsx)("h2",{className:"text-xl font-semibold mb-6",children:"Digite um termo para buscar produtos"}),r.length>0?(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(e=>{var r,t;return(0,n.jsx)(c.default,{id:e.id,title:e.title,handle:e.handle,description:e.description||"",price:{amount:e.priceRange.minVariantPrice.amount,currencyCode:e.priceRange.minVariantPrice.currencyCode},image:{src:(null===(r=e.images.edges[0])||void 0===r?void 0:r.node.originalSrc)||"",alt:(null===(t=e.images.edges[0])||void 0===t?void 0:t.node.altText)||e.title}},e.id)})}):e?(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("p",{className:"text-gray-500 mb-4",children:"N\xe3o encontramos produtos correspondentes \xe0 sua busca."}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"Tente usar termos mais gerais ou verifique a ortografia."}),(0,n.jsx)(i(),{href:"/shop",className:"bg-[#FF6700] text-white py-2 px-6 rounded-md hover:bg-[#E05A00] transition-colors inline-block",children:"Ver todos os produtos"})]}):(0,n.jsx)("div",{className:"text-center py-12",children:(0,n.jsx)("p",{className:"text-gray-500",children:"Use a barra de busca acima para encontrar produtos."})})]})})]})}function u(){return(0,n.jsx)(o.Suspense,{fallback:(0,n.jsxs)("div",{className:"text-center py-12",children:[(0,n.jsx)("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#FF6700]"}),(0,n.jsx)("p",{className:"mt-4 text-gray-600",children:"Carregando busca..."})]}),children:(0,n.jsx)(d,{})})}}},e=>{var r=r=>e(e.s=r);e.O(0,[874,766,391,441,684,358],()=>r(6584)),_N_E=e.O()}]);