(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{3533:(e,t,o)=>{"use strict";o.d(t,{No:()=>F,WY:()=>j,d$:()=>v,qw:()=>f,zh:()=>N});var r=o(5933),n=o(2527),a=o(2344),s=o(2641),i=o(6112),l=o(9509);function c(){let e=(0,r._)(["\n    mutation productCreate($input: ProductInput!) {\n      productCreate(input: $input) {\n        product {\n          id\n          title\n          handle\n          descriptionHtml\n          productType\n          vendor\n          tags\n          variants(first: 10) {\n            edges {\n              node {\n                id\n                title\n                price\n                compareAtPrice\n                sku\n                inventoryQuantity\n              }\n            }\n          }\n          images(first: 10) {\n            edges {\n              node {\n                id\n                src\n                altText\n              }\n            }\n          }\n        }\n        userErrors {\n          field\n          message\n        }\n      }\n    }\n  "]);return c=function(){return e},e}function d(){let e=(0,r._)(["\n    mutation collectionCreate($input: CollectionInput!) {\n      collectionCreate(input: $input) {\n        collection {\n          id\n          title\n          handle\n          descriptionHtml\n          image {\n            id\n            src\n            altText\n          }\n        }\n        userErrors {\n          field\n          message\n        }\n      }\n    }\n  "]);return d=function(){return e},e}console.log("Vari\xe1veis de ambiente carregadas:"),console.log("SHOPIFY_STORE_DOMAIN:","uxh1te-1d.myshopify.com"),console.log("SHOPIFY_STOREFRONT_TOKEN_CLIENT:","c468b35799acbc73e0a1ee98713bad6c"),console.log("SHOPIFY_ADMIN_API_TOKEN:",l.env.SHOPIFY_ADMIN_API_TOKEN);let u="uxh1te-1d.myshopify.com",p="c468b35799acbc73e0a1ee98713bad6c",m=l.env.SHOPIFY_ADMIN_API_TOKEN;if(!p)throw Error("A vari\xe1vel de ambiente SHOPIFY_STOREFRONT_TOKEN_CLIENT n\xe3o est\xe1 definida.");if(!m)throw Error("A vari\xe1vel de ambiente SHOPIFY_ADMIN_API_TOKEN n\xe3o est\xe1 definida.");console.log("Valores usados para a integra\xe7\xe3o:"),console.log("SHOPIFY_STORE_DOMAIN:",u),console.log("SHOPIFY_STOREFRONT_TOKEN_CLIENT:",p);let g=()=>({mockProducts:Array(10).fill(null).map((e,t)=>({id:"gid://shopify/Product/".concat(t+1),title:"Xiaomi Smartphone ".concat(t+1),handle:"xiaomi-smartphone-".concat(t+1),description:"Este \xe9 um smartphone Xiaomi de alta qualidade com excelentes recursos e desempenho.",priceRange:{minVariantPrice:{amount:"".concat(999+100*t),currencyCode:"BRL"}},images:{edges:[{node:{originalSrc:"https://placehold.co/600x400?text=Xiaomi+Smartphone",altText:"Xiaomi Smartphone ".concat(t+1)}}]}})),mockCollections:[{id:"gid://shopify/Collection/1",title:"Smartphones",handle:"smartphones",description:"Nossa cole\xe7\xe3o de smartphones Xiaomi",image:{originalSrc:"https://placehold.co/600x400?text=Smartphones",altText:"Smartphones"}},{id:"gid://shopify/Collection/2",title:"Acess\xf3rios",handle:"acessorios",description:"Acess\xf3rios para seus dispositivos Xiaomi",image:{originalSrc:"https://placehold.co/600x400?text=Acessorios",altText:"Acess\xf3rios"}},{id:"gid://shopify/Collection/3",title:"Casa Inteligente",handle:"casa-inteligente",description:"Produtos Xiaomi para sua casa inteligente",image:{originalSrc:"https://placehold.co/600x400?text=Casa+Inteligente",altText:"Casa Inteligente"}}]}),x=(0,n.$)({uri:"https://".concat(u,"/api/2023-10/graphql.json"),headers:{"X-Shopify-Storefront-Access-Token":p,"Content-Type":"application/json"}}),h=(0,n.$)({uri:"https://".concat(u,"/admin/api/2023-10/graphql.json"),headers:{"X-Shopify-Access-Token":m,"Content-Type":"application/json"}}),y=new a.R({link:x,cache:new s.D,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"}}}),b=new a.R({link:h,cache:new s.D,defaultOptions:{watchQuery:{fetchPolicy:"no-cache",errorPolicy:"ignore"},query:{fetchPolicy:"no-cache",errorPolicy:"all"},mutate:{errorPolicy:"all"}}});async function v(){try{console.log("Tentando buscar produtos da Shopify..."),console.log("URL da API:","https://".concat(u,"/api/2023-10/graphql.json")),console.log("Token usado:",p);let e=await y.query({query:(0,i.J1)("\n    query GetProducts {\n      products(first: 10) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            priceRange {\n              minVariantPrice {\n                amount\n                currencyCode\n              }\n            }\n            images(first: 1) {\n              edges {\n                node {\n                  originalSrc\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ")});return console.log("Resposta da API Shopify (produtos):",e),e.data.products.edges.map(e=>e.node)}catch(t){console.error("Erro ao buscar produtos:",t),console.warn("Usando dados mockados para produtos devido a erro na API");let{mockProducts:e}=g();return e}}async function f(){try{console.log("Tentando buscar cole\xe7\xf5es da Shopify..."),console.log("URL da API:","https://".concat(u,"/api/2023-10/graphql.json"));let e=await y.query({query:(0,i.J1)("\n    query GetCollections {\n      collections(first: 10) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            image {\n              originalSrc\n              altText\n            }\n          }\n        }\n      }\n    }\n  ")});return console.log("Resposta da API Shopify (cole\xe7\xf5es):",e),e.data.collections.edges.map(e=>e.node)}catch(t){console.error("Erro ao buscar cole\xe7\xf5es:",t),console.warn("Usando dados mockados para cole\xe7\xf5es devido a erro na API");let{mockCollections:e}=g();return e}}async function N(e){try{return(await y.query({query:(0,i.J1)("\n    query SearchProducts($query: String!) {\n      products(first: 20, query: $query) {\n        edges {\n          node {\n            id\n            title\n            handle\n            description\n            priceRange {\n              minVariantPrice {\n                amount\n                currencyCode\n              }\n            }\n            images(first: 1) {\n              edges {\n                node {\n                  originalSrc\n                  altText\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  "),variables:{query:e}})).data.products.edges.map(e=>e.node)}catch(o){console.error("Erro ao buscar produtos:",o);let{mockProducts:t}=g();return t.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase()))}}async function j(e){var t,o;let r=(0,i.J1)(c()),n=(null===(t=e.images)||void 0===t?void 0:t.map(t=>({src:t.src,altText:t.altText||e.title})))||[],a=(null===(o=e.variants)||void 0===o?void 0:o.map(e=>({price:e.price,compareAtPrice:e.compareAtPrice,sku:e.sku,inventoryQuantity:e.inventoryQuantity||0,requiresShipping:void 0===e.requiresShipping||e.requiresShipping,taxable:void 0===e.taxable||e.taxable})))||[{price:"0.00"}],s={title:e.title,descriptionHtml:e.descriptionHtml||"",productType:e.productType||"",vendor:e.vendor||"Xiaomi",tags:e.tags||[],images:n,variants:a};try{let e=await b.mutate({mutation:r,variables:{input:s}});if(e.data.productCreate.userErrors.length>0)throw console.error("Erros ao criar produto:",e.data.productCreate.userErrors),Error(e.data.productCreate.userErrors[0].message);return e.data.productCreate.product}catch(e){throw console.error("Erro ao criar produto:",e),e}}async function F(e,t,o){let r=(0,i.J1)(d()),n={title:e,descriptionHtml:t};o&&(n.image={src:o,altText:e});try{let e=await b.mutate({mutation:r,variables:{input:n}});if(e.data.collectionCreate.userErrors.length>0)throw console.error("Erros ao criar cole\xe7\xe3o:",e.data.collectionCreate.userErrors),Error(e.data.collectionCreate.userErrors[0].message);return e.data.collectionCreate.collection}catch(e){throw console.error("Erro ao criar cole\xe7\xe3o:",e),e}}},7220:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>l});var r=o(5155),n=o(2115),a=o(3533),s=o(6874),i=o.n(s);function l(){var e,t,o,s,l,c,d,u,p,m,g,x,h;let[y,b]=(0,n.useState)({title:"",descriptionHtml:"",productType:"",vendor:"Xiaomi",tags:[],images:[{src:"",altText:""}],variants:[{price:"0.00"}]}),[v,f]=(0,n.useState)({title:"",description:"",image:""}),[N,j]=(0,n.useState)({type:"",text:""}),[F,T]=(0,n.useState)({type:"",text:""}),[C,P]=(0,n.useState)(!1),[S,w]=(0,n.useState)(!1),I=(e,t)=>{b(o=>({...o,[e]:t}))},E=e=>{I("tags",e.split(",").map(e=>e.trim()).filter(e=>e))},A=(e,t)=>{let o=[...y.images||[]];0===o.length&&o.push({src:"",altText:""}),o[0]={...o[0],[e]:t},I("images",o)},k=(e,t)=>{let o=[...y.variants||[]];0===o.length&&o.push({price:"0.00"}),o[0]={...o[0],[e]:t},I("variants",o)},_=async e=>{e.preventDefault(),P(!0),j({type:"",text:""});try{let e=await (0,a.WY)(y);j({type:"success",text:'Produto "'.concat(e.title,'" criado com sucesso! ID: ').concat(e.id)}),b({title:"",descriptionHtml:"",productType:"",vendor:"Xiaomi",tags:[],images:[{src:"",altText:""}],variants:[{price:"0.00"}]})}catch(e){j({type:"error",text:"Erro ao criar produto: ".concat(e instanceof Error?e.message:String(e))})}finally{P(!1)}},O=async e=>{e.preventDefault(),w(!0),T({type:"",text:""});try{let e=await (0,a.No)(v.title,v.description,v.image||void 0);T({type:"success",text:'Cole\xe7\xe3o "'.concat(e.title,'" criada com sucesso! ID: ').concat(e.id)}),f({title:"",description:"",image:""})}catch(e){T({type:"error",text:"Erro ao criar cole\xe7\xe3o: ".concat(e instanceof Error?e.message:String(e))})}finally{w(!1)}};return(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold mb-2",children:"Painel de Administra\xe7\xe3o"}),(0,r.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,r.jsx)(i(),{href:"/",className:"hover:text-[#FF6700]",children:"In\xedcio"}),(0,r.jsx)("span",{className:"mx-2",children:"/"}),(0,r.jsx)("span",{children:"Admin"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Criar Novo Produto"}),N.text&&(0,r.jsx)("div",{className:"mb-4 p-3 rounded ".concat("success"===N.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:N.text}),(0,r.jsxs)("form",{onSubmit:_,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productTitle",children:"T\xedtulo*"}),(0,r.jsx)("input",{id:"productTitle",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:y.title,onChange:e=>I("title",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productDescription",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{id:"productDescription",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",rows:4,value:y.descriptionHtml,onChange:e=>I("descriptionHtml",e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productType",children:"Tipo de Produto"}),(0,r.jsx)("input",{id:"productType",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:y.productType,onChange:e=>I("productType",e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productVendor",children:"Fabricante"}),(0,r.jsx)("input",{id:"productVendor",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:y.vendor,onChange:e=>I("vendor",e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"productTags",children:"Tags (separadas por v\xedrgula)"}),(0,r.jsx)("input",{id:"productTags",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(e=y.tags)||void 0===e?void 0:e.join(", "))||"",onChange:e=>E(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Imagem"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productImageSrc",children:"URL da Imagem"}),(0,r.jsx)("input",{id:"productImageSrc",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(o=y.images)||void 0===o?void 0:null===(t=o[0])||void 0===t?void 0:t.src)||"",onChange:e=>A("src",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productImageAlt",children:"Texto Alternativo"}),(0,r.jsx)("input",{id:"productImageAlt",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(l=y.images)||void 0===l?void 0:null===(s=l[0])||void 0===s?void 0:s.altText)||"",onChange:e=>A("altText",e.target.value)})]})]})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",children:"Variante"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productPrice",children:"Pre\xe7o*"}),(0,r.jsx)("input",{id:"productPrice",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(d=y.variants)||void 0===d?void 0:null===(c=d[0])||void 0===c?void 0:c.price)||"0.00",onChange:e=>k("price",e.target.value),required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productCompareAtPrice",children:"Pre\xe7o Comparativo"}),(0,r.jsx)("input",{id:"productCompareAtPrice",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(p=y.variants)||void 0===p?void 0:null===(u=p[0])||void 0===u?void 0:u.compareAtPrice)||"",onChange:e=>k("compareAtPrice",e.target.value)})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productSKU",children:"SKU"}),(0,r.jsx)("input",{id:"productSKU",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(g=y.variants)||void 0===g?void 0:null===(m=g[0])||void 0===m?void 0:m.sku)||"",onChange:e=>k("sku",e.target.value)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm mb-2",htmlFor:"productInventory",children:"Quantidade em Estoque"}),(0,r.jsx)("input",{id:"productInventory",type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:(null===(h=y.variants)||void 0===h?void 0:null===(x=h[0])||void 0===x?void 0:x.inventoryQuantity)||0,onChange:e=>k("inventoryQuantity",parseInt(e.target.value))})]})]})]}),(0,r.jsx)("button",{type:"submit",className:"bg-[#FF6700] text-white py-2 px-4 rounded-md hover:bg-[#E05A00] transition-colors focus:outline-none focus:ring-2 focus:ring-[#FF6700] focus:ring-opacity-50 disabled:opacity-50",disabled:C,children:C?"Criando...":"Criar Produto"})]})]}),(0,r.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Criar Nova Cole\xe7\xe3o"}),F.text&&(0,r.jsx)("div",{className:"mb-4 p-3 rounded ".concat("success"===F.type?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:F.text}),(0,r.jsxs)("form",{onSubmit:O,children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"collectionTitle",children:"T\xedtulo*"}),(0,r.jsx)("input",{id:"collectionTitle",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:v.title,onChange:e=>f({...v,title:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"collectionDescription",children:"Descri\xe7\xe3o"}),(0,r.jsx)("textarea",{id:"collectionDescription",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",rows:4,value:v.description,onChange:e=>f({...v,description:e.target.value})})]}),(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("label",{className:"block text-gray-700 text-sm font-bold mb-2",htmlFor:"collectionImage",children:"URL da Imagem"}),(0,r.jsx)("input",{id:"collectionImage",type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-[#FF6700]",value:v.image,onChange:e=>f({...v,image:e.target.value})})]}),(0,r.jsx)("button",{type:"submit",className:"bg-[#FF6700] text-white py-2 px-4 rounded-md hover:bg-[#E05A00] transition-colors focus:outline-none focus:ring-2 focus:ring-[#FF6700] focus:ring-opacity-50 disabled:opacity-50",disabled:S,children:S?"Criando...":"Criar Cole\xe7\xe3o"})]})]})]})]})}},9009:(e,t,o)=>{Promise.resolve().then(o.bind(o,7220))}},e=>{var t=t=>e(e.s=t);e.O(0,[874,391,441,684,358],()=>t(9009)),_N_E=e.O()}]);